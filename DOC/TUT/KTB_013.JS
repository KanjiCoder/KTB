//+==========================================================+// // [---][001]
//| Code Section Is Below This Point                         |// // [---][001]
//+==========================================================+// // [---][001]
//|#_KANJIS_TILEMAP_BASE_#:==================================|// // [---][001]
//|                                                          |// // [---][001]
//|  @KTB@ : Kanji_Tilemap_Base / Kanjis_Tilemap_Base        |// // [---][001]
//|                                                          |// // [---][001]
//|  A project to allow you to quickly experiment with       |// // [---][001]
//|  tilemap shader ideas without having to do all of        |// // [---][001]
//|  the setup code needed to create the webgl contexts      |// // [---][001]
//|  and basic editing code for setting down tiles.          |// // [---][001]
//|                                                          |// // [---][001]
//+==================================:#_KANJIS_TILEMAP_BASE_#+// // [---][001]
//:#_C_CONSTANT_#:===========================================:// // [004][---]
                                                                 // [---][---]
    const _constants_=(0)///////////////////////////////////     // [012]
    ////                                                         // [012]
    ,   c_wvc =(           "webgl2" )//: WGL_VER.CONTEXT ://     // [012]
    ,   c_wvs =( "# version 300 es" )//: WGL_VER.SHADER  ://     // [012]
    ////                                                         // [012]
    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;     // [012]
                                                                 // [---][---]
//:===========================================:#_C_CONSTANT_#:// // [004][---]
//:#_D_DATA_#:===============================================:// // [004][002]
                                                                 // [---][002]
    var d_p2k_l01 ; //: Uniform LOCATION #1 ( sampler )::://     // [---][002]
    var d_p2k_u01 ; //:      GPU UNIFORM #1 ( sampler )::://     // [---][002]
                    //:                                ::://     // [---][002]
    var d_p2k_l02 ; //: Uniform LOCATION #2 ( sampler )::://     // [---][002]
    var d_p2k_u02 ; //:      GPU UNIFORM #2 ( sampler )::://     // [---][002]
                    //:                                ::://     // [---][002]
    var d_p2k_l03 ; //: Uniform LOCATION #3 ( sampler )::://     // [---][002]
    var d_p2k_u03 ; //:      GPU UNIFORM #3 ( sampler )::://     // [---][002]
                    //:                                ::://     // [---][002]
    var d_p2k_l04 ; //: Uniform LOCATION #4 ( sampler )::://     // [---][002]
    var d_p2k_u04 ; //:      GPU UNIFORM #4 ( sampler )::://     // [---][002]
                                                                 // [---][---]
    var d_ph1 ;;;;; //: Program Handle #1 :::::::::::::::://     // [---][003]
    var d_ph2 ;;;;; //: Program Handle #2 :::::::::::::::://     // [---][003]
    var d_ph3 ;;;;; //: Program Handle #3 :::::::::::::::://     // [---][003]
    var d_ph4 ;;;;; //: Program Handle #4 :::::::::::::::://     // [---][003]
                                                                 // [---][003]
    var d_hv1 ;;;;; //: Handle_Vertex  #1 (shader_object)://     // [---][003]
    var d_hv2 ;;;;; //: Handle_Vertex  #2 (shader_object)://     // [---][003]
    var d_hv3 ;;;;; //: Handle_Vertex  #3 (shader_object)://     // [---][003]
    var d_hv4 ;;;;; //: Handle_Vertex  #4 (shader_object)://     // [---][003]
                                                                 // [---][003]
    var d_hf1 ;;;;; //: Handle_Fragme  #1 (shader_object)://     // [---][003]
    var d_hf2 ;;;;; //: Handle_Fragme  #2 (shader_object)://     // [---][003]
    var d_hf3 ;;;;; //: Handle_Fragme  #3 (shader_object)://     // [---][003]
    var d_hf4 ;;;;; //: Handle_Fragme  #4 (shader_object)://     // [---][003]
                                                                 // [---][003]
    var d_sv1 ;;;;; //: Source_Vertex  #1 (source_string)://     // [---][003]
    var d_sv2 ;;;;; //: Source_Vertex  #2 (source_string)://     // [---][003]
    var d_sv3 ;;;;; //: Source_Vertex  #3 (source_string)://     // [---][003]
    var d_sv4 ;;;;; //: Source_Vertex  #4 (source_string)://     // [---][003]
                                                                 // [---][003]
    var d_sf1 ;;;;; //: Source_Fragme  #1 (source_string)://     // [---][003]
    var d_sf2 ;;;;; //: Source_Fragme  #2 (source_string)://     // [---][003]
    var d_sf3 ;;;;; //: Source_Fragme  #3 (source_string)://     // [---][003]
    var d_sf4 ;;;;; //: Source_Fragme  #4 (source_string)://     // [---][003]
                                                                 // [---][---]
    var d_htm_win ; //: HTML_related_thingy.WINDOW       ://     // [---][008]
    var d_htm_doc ; //: HTML_related_thingy.DOCUMENT     ://     // [---][008]
    var d_htm_bod ; //: HTML_related_thingy.BODY         ://     // [---][008]
    var d_htm_can ; //: HTML_related_thingy.CANVAS       ://     // [011]
                                                                 // [011]
    var d_wgl ;;;;; //: Web_GL (context object)          ://     // [011]
                                                                 // [---][---]
//:===============================================:#_D_DATA_#:// // [---][004][002]
//:#_D_DATA_SHADER_001_#:====================================:// // [013]
d_sv1=((c_wvs)+"\n")+(` //:::::::[ TILEMAP_VERT_SHADER.GAME ]:// // [013]
                                                                 // [013]
    /** SHADER_CODE_GOES_HERE **/                                // [013]
                                                                 // [013]
`);;//:::::::::::::::::::::::::::[ TILEMAP_VERT_SHADER.GAME ]:// // [013]
d_sf1=((c_wvs)+"\n")+(` //:::::::[ TILEMAP_FRAG_SHADER.GAME ]:// // [013]
                                                                 // [013]
    /** SHADER_CODE_GOES_HERE **/                                // [013]
                                                                 // [013]
`);;//:::::::::::::::::::::::::::[ TILEMAP_FRAG_SHADER.GAME ]:// // [013]
//:====================================:#_D_DATA_SHADER_001_#:// // [013]
//:#_D_DATA_SHADER_002_#:====================================:// // [013]
d_sv2=((c_wvs)+"\n")+(` //:::::::[ POINT_SPRITE_VERT_SHADER ]:// // [013]
                                                                 // [013]
    /** SHADER_CODE_GOES_HERE **/                                // [013]
                                                                 // [013]
`);;//::::::::::::::::::::::[ POINT_SPRITE_VERT_SHADER.GAME ]:// // [013]
d_sf2=((c_wvs)+"\n")+(` //::[ POINT_SPRITE_FRAG_SHADER.GAME ]:// // [013]
                                                                 // [013]
    /** SHADER_CODE_GOES_HERE **/                                // [013]
                                                                 // [013]
`);;//::::::::::::::::::::::[ POINT_SPRITE_FRAG_SHADER.GAME ]:// // [013]
//:====================================:#_D_DATA_SHADER_002_#:// // [013]
//:#_D_DATA_SHADER_003_#:====================================:// // [013]
d_sv3=((c_wvs)+"\n")+(` //:::::::[ TILEMAP_VERT_SHADER.MENU ]:// // [013]
                                                                 // [013]
    /** SHADER_CODE_GOES_HERE **/                                // [013]
                                                                 // [013]
`);;//:::::::::::::::::::::::::::[ TILEMAP_VERT_SHADER.MENU ]:// // [013]
d_sf3=((c_wvs)+"\n")+(` //:::::::[ TILEMAP_FRAG_SHADER.MENU ]:// // [013]
                                                                 // [013]
    /** SHADER_CODE_GOES_HERE **/                                // [013]
                                                                 // [013]
`);;//:::::::::::::::::::::::::::[ TILEMAP_FRAG_SHADER.MENU ]:// // [013]
//:====================================:#_D_DATA_SHADER_003_#:// // [013]
//:#_D_DATA_SHADER_004_#:====================================:// // [013]
d_sv4=((c_wvs)+"\n")+(` //::[ POINT_SPRITE_VERT_SHADER.MENU ]:// // [013]
                                                                 // [013]
    /** SHADER_CODE_GOES_HERE **/                                // [013]
                                                                 // [013]
`);;//::::::::::::::::::::::[ POINT_SPRITE_VERT_SHADER.MENU ]:// // [013]
d_sf4=((c_wvs)+"\n")+(` //::[ POINT_SPRITE_FRAG_SHADER.MENU ]:// // [013]
                                                                 // [013]
    /** SHADER_CODE_GOES_HERE **/                                // [013]
                                                                 // [013]
`);;//::::::::::::::::::::::[ POINT_SPRITE_FRAG_SHADER.MENU ]:// // [013]
//:====================================:#_D_DATA_SHADER_004_#:// // [013]
//:#_F_FUNCTION_#:===========================================:// // [004][---]
                                                                 // [---]
    const   F_ERROR =( i_msg )=>{   //::::::::::::::::::::::::// // [---][009]
                                                                 // [---][009]
        console.log(  "[ F_ERROR ]:" + i_msg );                  // [---][009]
        window.alert( "[ F_ERROR ]:" + i_msg );                  // [---][009]
        throw(        "[ F_ERROR ]:" + i_msg );                  // [---][009]
                                                                 // [---][009]
    };;//:::::::::::::::::::::::::::::::::::::::::[ F_ERROR ]:// // [---][009]
    const   F_MESSAGE =( i_msg )=>{ //::::::::::::[ F_MSG   ]:// // [010][---]
                                                                 // [010][---]
        console.log( i_msg );                                    // [010][---]
                                                                 // [010][---]
    };;//:::::::::::::::::::::::::::::::::::::::::[ F_MSG   ]:// // [010][---]
    const   F_INPUT_MOUSE =( i_mev )=>{   //::::::::::::::::::// // [---][005]
    //:======================================================:// // [---][005]
                                                                 // [---][005]
        /** CODE_GOES_HERE **/                                   // [---][005]
                                                                 // [---][005]
    //:======================================================:// // [---][005]
    };;//:::::::::::::::::::::::::::::::::::[ F_INPUT_MOUSE ]:// // [---][005]
    const   F_INPUT_KEYBOARD =( i_kev )=>{   //:::::::::::::::// // [---][005]
    //:======================================================:// // [---][005]
                                                                 // [---][005]
        /** CODE_GOES_HERE **/                                   // [---][005]
                                                                 // [---][005]
    //:======================================================:// // [---][005]
    };;//::::::::::::::::::::::::::::::::[ F_INPUT_KEYBOARD ]:// // [---][005]
    const   F_LOOP_FOREVER =( )=>{  //::::::::::::::::::::::::// // [---][005]
                                                                 // [---][005]
        /** CODE_GOES_HERE **/                                   // [---][005]
                                                                 // [---][005]
    };;//::::::::::::::::::::::::::::::::::[ F_LOOP_FOREVER ]:// // [---][005]
    const   F_SETUP =( )=>{   //::::::::::::::::::::::::::::::// // [---][005]
    //:======================================================:// // [---][005]
                                                                 // [---]
        window.alert( "[HELLO_WORLD]" );                         // [006][MOV][001]
                                                                 // [---]
        //:#_SETUP_FUNCTION_POINTERS_#:==================://     // [---][009]
                                                                 // [---][009]
            const ERR =( F_ERROR   );                            // [---][009]
            const MSG =( F_MESSAGE );                            // [010][---]
                                                                 // [---][009]
        //:==================:#_SETUP_FUNCTION_POINTERS_#://     // [---][009]
        //:#_BASIC_DOM_SETUP_#:==========================://     // [---][008]
                                                                 // [---][008]
            d_htm_win =( window               );                 // [---][008]
            d_htm_doc =( window.document      );                 // [---][008]
            d_htm_bod =( window.document.body );                 // [---][008]
            if( ! d_htm_bod ){                                   // [---][008]
                                                                 // [---][008]
                d_htm_bod = d_htm_doc.createElement("body");     // [---][008]
                d_htm_doc.body =( d_htm_bod );                   // [---][008]
                MSG( "[_$_BODY_CREATED_AND_APPENDED_$_]" );;     // [010][---]
                                                                 // [---][008]
            };;                                                  // [---][008]
        //:==========================:#_BASIC_DOM_SETUP_#://     // [---][008]
        //:#_BASIC_DOM_CHECK_#:==========================://     // [---][009]
                                                                 // [---][009]
            if( ! d_htm_win ){ ERR( "[d_htm_win]" ); };;         // [---][009]
            if( ! d_htm_doc ){ ERR( "[d_htm_doc]" ); };;         // [---][009]
            if( ! d_htm_bod ){ ERR( "[d_htm_bod]" ); };;         // [---][009]
                                                                 // [---][009]
        //:==========================:#_BASIC_DOM_CHECK_#://     // [---][009]
        //:#_BASIC_GRAPHICS_SETUP_#:=====================://     // [---][011]
                                                                 // [---][011]
            d_htm_can =(d_htm_doc.createElement("canvas"));;     // [---][011]
            d_htm_can.width =( 512 );;;;;;;;;;;;;;;;;;;;;;;;     // [---][011]
            d_htm_can.height=( 512 );;;;;;;;;;;;;;;;;;;;;;;;     // [---][011]
                                                                 // [---][011]
            d_wgl     =(d_htm_can.getContext( c_wvc ));;;;;;     // [012][011]
                                                                 // [---][011]
        //:=====================:#_BASIC_GRAPHICS_SETUP_#://     // [---][011]
        //:#_BASIC_GRAPHICS_CHECK_#:=====================://     // [---][011]
                                                                 // [---][011]
            if( ! d_htm_can ){ ERR( "[d_htm_can]" ); };;;;;;     // [---][011]
            if( ! d_wgl     ){ ERR( "[d_wgl.___]" ); };;;;;;     // [---][011]
                                                                 // [---][011]
        //:=====================:#_BASIC_GRAPHICS_CHECK_#://     // [---][011]
                                                                 // [---]
    //:======================================================:// // [---][005]
    };;//:::::::::::::::::::::::::::::::::::::::::[ F_SETUP ]:// // [---][005]
                                                                 // [---][---]
//:===========================================:#_F_FUNCTION_#:// // [---][004][---]
//:#_M_MAIN_#:===============================================:// // [006]
    (( int_main_void )=>{  //::::::::::::::::::::::::[ MAIN ]:// // [006]
                                                                 // [006]
        F_SETUP();                                               // [006]
                                                                 // [006]
    })( /**IIFE**/ );; //::::::::::::::::::::::::::::[ MAIN ]:// // [006]
//:===============================================:#_M_MAIN_#:// // [006]
//| Code Section Is Above This Point                         |// // [---][001]
//+==========================================================+// // [---][001]
//+==========================================================+// // [---][001]
//| Comments Section Is Below This Point                     |// // [---][001]
//+==========================================================+// // [---][001]
/** ******************************************************** *** // [---][001]
#_KANJIS_TILEMAP_BASE_# :======================================: // [---][001]
                                                                 // [---][001]
    Goal : Create a tilemap project who's source code            // [---][001]
         : can be used any time you want to do a quick           // [---][001]
         : tilemap rendering experiment. It should be            // [---][001]
         : flexible enough to use is as a library that           // [---][001]
         : can be used for the[ MKB ]project.                    // [---][001]
         : @MKB@ : Magic Kyoot Ball.                             // [---][001]
                                                                 // [---][001]
    Structure : 1 shader for tilemap stuff                       // [---][001]
              : 1 shader for sprite rendering stuff.             // [---][001]
              : 1 shader for tilemap menu stuff                  // [---][001]
              : 1 shader for sprite MENU rendering.              // [---][001]
                                                                 // [---][001]
    Uniforms  : Only 4 uniforms. 1 for each texture              // [---][001]
              : sampler we need. Everything else is              // [---][001]
              : encoded into texture memory somehow.             // [---][001]
                                                                 // [---][001]
    Whatever Texture Memory Block :                              // [---][001]
                                                                 // [---][001]
        @wmx@ : whatever_memory - X origin                       // [---][001]
        @wmy@ : whatever_memory - Y origin                       // [---][001]
                                                                 // [---][001]
                                                                 // [---][001]
:======================================: #_KANJIS_TILEMAP_BASE_# // [---][001]
#_C_CONSTANT_# :===============================================: // [007]
                                                                 // [007]
    Constants are single integers or strings that are            // [007]
    immutable. Complex immutable data does __NOT__ belong        // [007]
    in the constant section. Constants must be expressible       // [007]
    as "#define" macros in C99.                                  // [007]
                                                                 // [007]
    For example : A lookup table does not go in the              // [007]
                : constant section, even though it is            // [007]
                : an immutable array of values.                  // [007]
                                                                 // [007]
:===============================================: #_C_CONSTANT_# // [007]
#_D_DATA_# :===================================================: // [---][004][002]
                             TAG[  D_FOR_DATA_WHICH_IS_GLOBAL  ] // [---][004][---]
                             TAG[ _D_FOR_DATA_WHICH_IS_GLOBAL_ ] // [---][004][---]
                                                                 // [---][002]
    Anything that ends up colliding with "AIM.JS"                // [---][002]
    will get further prefix of "ktb_" "                          // [---][002]
    So, if[ d_p2k_000 ]collides, with "AIM.JS" then              // [---][002]
    [ d_p2k_000 ]becomes[ ktb_d_p2k_000 ].                       // [---][002]
                                                                 // [---][002]
                                                                 // [---][002]
    All mutable data or complex immutable data goes here.        // [---][002]
    The global/toplevel stuff. The filescope stuff.              // [---][002]
                                                                 // [---][002]
:===================================================: #_D_DATA_# // [---][004][002]
#_F_FUNCTION_# :===============================================: // [---][007]
                                                                 // [---][007]
    Functions go in this section and start with an "F".          // [---][007]
                                                                 // [---][007]
:===============================================: #_F_FUNCTION_# // [---][007]
#_M_MAIN_# :===================================================: // [---][007]
                                                                 // [---][007]
    Though this is a JAVASCRIPT file, we will be using           // [---][007]
    a "C99 Style". So we wil pretend this is our                 // [---][007]
    "MAIN" right here.                                           // [---][007]
                                                                 // [---][007]
:===================================================: #_M_MAIN_# // [---][007]
#_BASIC_DOM_SETUP_# :==========================================: // [---][008]
                                                                 // [---][008]
    Bare basic domain object model (DOM) setup.                  // [---][008]
    I H_A_T_E writing HTML, so we are going to do                // [---][008]
    as little of that as required to get setup.                  // [---][008]
                                                                 // [---][008]
:==========================================: #_BASIC_DOM_SETUP_# // [---][008]
#_SETUP_FUNCTION_POINTERS_# :==================================: // [---][009]
                                                                 // [---][009]
    Function pointers within setup function to help make         // [---][009]
    the code more terse, as our column space here is             // [---][009]
    very precious to us.                                         // [---][009]
                                                                 // [---][009]
:==================================: #_SETUP_FUNCTION_POINTERS_# // [---][009]
#_BASIC_DOM_CHECK_# :==========================================: // [---][009]
                                                                 // [---][009]
    Make sure the basic DOM setup was done correctly.            // [---][009]
    All object references should be non null.                    // [---][009]
                                                                 // [---][009]
:==========================================: #_BASIC_DOM_CHECK_# // [---][009]
$_BODY_CREATED_AND_APPENDED_$ :================================: // [---][010]
                                                                 // [---][010]
    The [ .HTM / .HTML ]file did not start with a body.          // [---][010]
    ( This can happen with BARE_MINIMUM_HTML_FILE )              // [---][010]
    We added a body object to the file and have                  // [---][010]
    notified you.                                                // [---][010]
                                                                 // [---][010]
:================================: $_BODY_CREATED_AND_APPENDED_$ // [---][010]
#_BASIC_GRAPHICS_SETUP_# :=====================================: // [---][011]
                                                                 // [---][011]
    Get a webgl context , which is basically OpenGL              // [---][011]
    with a few stupid-ass object oriented modifications.         // [---][011]
                                                                 // [---][011]
:=====================================: #_BASIC_GRAPHICS_SETUP_# // [---][011]
#_BASIC_GRAPHICS_CHECK_# :=====================================: // [---][011]
                                                                 // [---][011]
    Make sure we were able to create a webgl context.            // [---][011]
    Otherwise, abort mission and give up forever.                // [---][011]
    Decide to stop being a programmer after 15 years             // [---][011]
    and go work on an oil rig in the middle of alaska            // [---][011]
    where I fist fight polar bears in my off time.               // [---][011]
                                                                 // [---][011]
:=====================================: #_BASIC_GRAPHICS_CHECK_# // [---][011]
#_D_DATA_SHADER_001_# :========================================: // [013][---]
                                                                 // [013][---]
    @SHADER_001@ : VERTEX+FRAGMENT game __TILE_MAP__ shader.     // [013][---]
                                                                 // [013][---]
:========================================: #_D_DATA_SHADER_001_# // [013][---]
#_D_DATA_SHADER_002_# :========================================: // [013][---]
                                                                 // [013][---]
    @SHADER_002@ : VERTEX+FRAGMENT game POINT_SPRITE shader.     // [013][---]
                                                                 // [013][---]
:========================================: #_D_DATA_SHADER_002_# // [013][---]
#_D_DATA_SHADER_003_# :========================================: // [013][---]
                                                                 // [013][---]
    @SHADER_003@ : VERTEX+FRAGMENT menu __TILE_MAP__ shader.     // [013][---]
                                                                 // [013][---]
:========================================: #_D_DATA_SHADER_003_# // [013][---]
#_D_DATA_SHADER_004_# :========================================: // [013][---]
                                                                 // [013][---]
    @SHADER_004@ : VERTEX+FRAGMENT menu POINT_SPRITE shader.     // [013][---]
                                                                 // [013][---]
:========================================: #_D_DATA_SHADER_004_# // [013][---]

*** ******************************************************** **/ // [---][001]
//+==========================================================+// // [---][001]
//| Comments Section Is Above This Point                     |// // [---][001]
//+==========================================================+// // [---][001]
     
     
     
     
     
     
     
     
     
     
     
     